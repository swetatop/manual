<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ—Å—ñ–±–Ω–∏–∫ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ | Ukraine GTA 5</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script type="module" src="firebase-app.js"></script>
    
    <style>
        /* –í–°–ï –°–¢–ò–õ–ò –û–°–¢–ê–í–õ–Ø–ï–ú –ö–ê–ö –ë–´–õ–ò */
        :root {
            --bg-dark: #0C1016;
            --bg-card: #141A24;
            --bg-hover: #1A2230;
            --primary: #3B82F6;
            --primary-dark: #2563EB;
            --primary-light: #60A5FA;
            --text-light: #F8FAFC;
            --text-gray: #A6A6A6;
            --border: #2D3748;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --sidebar-width: 300px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: var(--bg-dark);
            color: var(--text-light);
            min-height: 100vh;
            line-height: 1.6;
            font-family: 'Roboto', sans-serif;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
        }
        
        /* –°–ê–ô–î–ë–ê–† –ò –í–°–ï –°–¢–ò–õ–ò - –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: var(--sidebar-width);
            background-color: var(--bg-card);
            border-right: 1px solid var(--border);
            transform: translateX(-100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            overflow-y: auto;
            padding-top: 70px;
            scrollbar-width: none;
        }
        
        .sidebar.active {
            transform: translateX(0);
        }
        
        /* ... –í–°–ï –û–°–¢–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò –ö–ê–ö –ë–´–õ–ò ... */
        
        /* –ö–Ω–æ–ø–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ */
        .admin-panel-btn {
            position: fixed;
            bottom: 70px;
            right: 25px;
            background: linear-gradient(135deg, #8B5CF6, #7C3AED);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            transition: all 0.3s;
            z-index: 800;
            font-family: 'Montserrat', sans-serif;
            font-size: 15px;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
            display: none;
        }
        
        .admin-panel-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ */
        .logout-btn {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            border: 1px solid var(--danger);
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            transition: all 0.3s;
            z-index: 800;
            font-family: 'Montserrat', sans-serif;
            font-size: 15px;
        }
        
        .logout-btn:hover {
            background-color: rgba(239, 68, 68, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.2);
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .admin-panel-btn {
                bottom: 60px;
                right: 20px;
                padding: 10px 20px;
                font-size: 14px;
            }
            
            .logout-btn {
                bottom: 20px;
                right: 20px;
                padding: 10px 20px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –º–µ–Ω—é -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—é -->
    <button class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- –°–∞–π–¥–±–∞—Ä -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>Ukraine GTA 5</h2>
        </div>
        <div class="sidebar-nav">
            <a href="#" class="nav-item active" onclick="showPage('home')">
                <i class="fas fa-home"></i> –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
            </a>
            <a href="#" class="nav-item" onclick="showPage('online')">
                <i class="fas fa-clock"></i> –û–Ω–ª–∞–π–Ω –∑–º—ñ–Ω–∞
            </a>
            <a href="#" class="nav-item" onclick="showPage('statute')">
                <i class="fas fa-scroll"></i> –°—Ç–∞—Ç—É—Ç —Ç–∞ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç
            </a>
            <a href="#" class="nav-item" onclick="showPage('penalties')">
                <i class="fas fa-gavel"></i> –°–∏—Å—Ç–µ–º–∞ —Å—Ç—è–≥–Ω–µ–Ω—å
            </a>
            <a href="#" class="nav-item" onclick="showPage('inactive')">
                <i class="fas fa-calendar-times"></i> –ó–∞—è–≤–∫–∞ –Ω–∞ –Ω–µ–∞–∫—Ç–∏–≤
            </a>
            <a href="#" class="nav-item" onclick="showPage('personnel')">
                <i class="fas fa-users"></i> –û—Å–æ–±–æ–≤–∏–π —Å–∫–ª–∞–¥
            </a>
            <a href="#" class="nav-item" onclick="showPage('commands')">
                <i class="fas fa-terminal"></i> –ö–æ–º–∞–Ω–¥–∏
            </a>
            <a href="#" class="nav-item" onclick="showPage('fractions')">
                <i class="fas fa-city"></i> –§—Ä–∞–∫—Ü—ñ—ó
            </a>
            <a href="#" class="nav-item" onclick="showPage('scripts')">
                <i class="fas fa-code"></i> –°–∫—Ä–∏–ø—Ç–∏
            </a>
            <a href="#" class="nav-item" onclick="showPage('faq')">
                <i class="fas fa-question-circle"></i> –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è
            </a>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="main-content" id="mainContent">
        <!-- –ì–û–õ–û–í–ù–ê –°–¢–û–†–Ü–ù–ö–ê -->
        <div id="homePage" class="page-content active">
            <div class="user-header">
                <div class="user-info">
                    <h1 id="userGreeting">–í—ñ—Ç–∞—î–º–æ, <span id="userName">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</span>!</h1>
                    <p>–¶–µ–π –ø–æ—Å—ñ–±–Ω–∏–∫ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –¥–æ–ø–æ–º–æ–≥—Ç–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —Å–≤–æ—ó –æ–±–æ–≤'—è–∑–∫–∏, –æ–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—å —ñ–∑ –ø—Ä–∞–≤–∏–ª–∞–º–∏, –∫–æ–º–∞–Ω–¥–∞–º–∏ —Ç–∞ –Ω–æ–≤–∏–º–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º–∏ —Å–µ—Ä–≤–µ—Ä–∞.</p>
                </div>
            </div>
            
            <!-- –ë–ª–æ–∫ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó -->
            <div class="user-info-block" id="userInfoBlock">
                <div class="user-info-content">
                    <div class="user-avatar">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="user-details">
                        <div class="user-name" id="userFullName">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
                        <div class="user-meta">
                            <div><i class="fas fa-id-card"></i> ID: <span id="userId">...</span></div>
                            <div><i class="fab fa-telegram"></i> Telegram: <span id="userTelegram">...</span></div>
                            <div><i class="fas fa-shield-alt"></i> –†–æ–ª—å: <span id="userRole">...</span></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –ö–∞—Ä—Ç–∫–∏ -->
            <div class="capabilities">
                <h2>–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —Å–∏—Å—Ç–µ–º–∏</h2>
                <div class="cards-grid">
                    <div class="home-card" onclick="showPage('statute')">
                        <div class="home-card-icon"><i class="fas fa-scroll"></i></div>
                        <h3>–°—Ç–∞—Ç—É—Ç —Ç–∞ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç</h3>
                        <p>–ü–æ–≤–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫ –∑ –ø—Ä–∞–≤–∏–ª —Ç–∞ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—É —Ä–æ–±–æ—Ç–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞.</p>
                        <a href="#" class="home-card-btn" onclick="event.stopPropagation(); showPage('statute');">
                            –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                    
                    <div class="home-card" onclick="showPage('online')">
                        <div class="home-card-icon"><i class="fas fa-clock"></i></div>
                        <h3>–û–Ω–ª–∞–π–Ω –∑–º—ñ–Ω–∞</h3>
                        <p>–ì—Ä–∞—Ñ—ñ–∫ –∑–º—ñ–Ω, –≤–∏–º–æ–≥–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –æ–Ω–ª–∞–π–Ω –≥–æ–¥–∏–Ω–∞–º–∏.</p>
                        <a href="#" class="home-card-btn" onclick="event.stopPropagation(); showPage('online');">
                            –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                    
                    <div class="home-card" onclick="showPage('penalties')">
                        <div class="home-card-icon"><i class="fas fa-gavel"></i></div>
                        <h3>–°–∏—Å—Ç–µ–º–∞ —Å—Ç—è–≥–Ω–µ–Ω—å</h3>
                        <p>–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∞—Ä–Ω—ñ –∑–∞—Ö–æ–¥–∏, —à—Ç—Ä–∞—Ñ–∏, –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è.</p>
                        <a href="#" class="home-card-btn" onclick="event.stopPropagation(); showPage('penalties');">
                            –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                    
                    <div class="home-card" onclick="showPage('inactive')">
                        <div class="home-card-icon"><i class="fas fa-calendar-times"></i></div>
                        <h3>–ó–∞—è–≤–∫–∞ –Ω–∞ –Ω–µ–∞–∫—Ç–∏–≤</h3>
                        <p>–ü–æ–¥–∞—á–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å, –≤—ñ–¥–ø—É—Å—Ç–∫–∏, —Ç–∏–º—á–∞—Å–æ–≤—É –Ω–µ–∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.</p>
                        <a href="#" class="home-card-btn" onclick="event.stopPropagation(); showPage('inactive');">
                            –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –í–°–ï –û–°–¢–ê–õ–¨–ù–´–ï –°–¢–†–ê–ù–ò–¶–´ (online, statute –∏ —Ç.–¥.) -->
        <!-- –û—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –±—ã–ª–∏ -->
        
    </div>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="footer">
        <div class="footer-content">
            <p><strong>Ukraine GTA 5 ¬©</strong> | –°–∞–π—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ <strong id="creatorName">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</strong> | –ö–æ–Ω—Ç–µ–Ω—Ç ‚Äì <strong>Parkhyts</strong></p>
        </div>
    </footer>

    <!-- –ö–Ω–æ–ø–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ -->
    <button class="admin-panel-btn" id="adminPanelBtn">
        <i class="fas fa-crown"></i> –ê–¥–º—ñ–Ω –ü–∞–Ω–µ–ª—å
    </button>

    <!-- –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ -->
    <button class="logout-btn" id="logoutBtn">
        <i class="fas fa-sign-out-alt"></i> –í–∏–π—Ç–∏
    </button>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –≤—ã—Ö–æ–¥–∞ -->
    <div class="logout-modal" id="logoutModal">
        <div class="logout-modal-content">
            <h3>–í–∏–π—Ç–∏ –∑ —Å–∏—Å—Ç–µ–º–∏</h3>
            <p>–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–π—Ç–∏?</p>
            <div class="modal-buttons">
                <button class="modal-btn confirm" id="confirmLogout">–¢–∞–∫, –≤–∏–π—Ç–∏</button>
                <button class="modal-btn cancel" id="cancelLogout">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
            </div>
        </div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç -->
    <script type="module">
        import { db } from './firebase-app.js';
        import { doc, getDoc } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";
        
        // ========== –ü–†–û–í–ï–†–ö–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò ==========
        async function checkAuth() {
            console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...');
            
            // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º localStorage
            const savedUser = localStorage.getItem('telegram_user');
            const authTime = localStorage.getItem('auth_time');
            
            if (!savedUser || !authTime) {
                console.log('‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ localStorage');
                window.location.href = 'login.html';
                return null;
            }
            
            // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏ (24 —á–∞—Å–∞)
            const timeDiff = Date.now() - parseInt(authTime);
            if (timeDiff > 86400000) {
                console.log('‚ùå –°–µ—Å—Å–∏—è —É—Å—Ç–∞—Ä–µ–ª–∞');
                localStorage.clear();
                window.location.href = 'login.html';
                return null;
            }
            
            const userData = JSON.parse(savedUser);
            console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑ localStorage:', userData.first_name);
            
            // 3. –ï—Å–ª–∏ —ç—Ç–æ –∞–¥–º–∏–Ω (ID: 5316593741) - —Å—Ä–∞–∑—É –ø—É—Å–∫–∞–µ–º
            if (userData.id === '5316593741') {
                console.log('üëë –≠—Ç–æ –∞–¥–º–∏–Ω!');
                return {
                    ...userData,
                    isAdmin: true,
                    status: 'approved'
                };
            }
            
            // 4. –î–ª—è –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–≤–µ—Ä—è–µ–º Firebase
            try {
                const userDoc = await getDoc(doc(db, "users", userData.id));
                
                if (!userDoc.exists()) {
                    console.log('‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –±–∞–∑–µ');
                    localStorage.clear();
                    window.location.href = 'login.html';
                    return null;
                }
                
                const dbData = userDoc.data();
                
                if (dbData.status !== 'approved' && !dbData.isAdmin) {
                    console.log('‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω');
                    localStorage.clear();
                    window.location.href = 'login.html';
                    return null;
                }
                
                console.log('‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!');
                return { ...userData, ...dbData };
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ Firebase:', error);
                // –ï—Å–ª–∏ Firebase –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ —ç—Ç–æ –∞–¥–º–∏–Ω - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
                if (userData.id === '5316593741') {
                    console.log('‚ö†Ô∏è Firebase –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ —ç—Ç–æ –∞–¥–º–∏–Ω');
                    return {
                        ...userData,
                        isAdmin: true,
                        status: 'approved'
                    };
                }
                
                // –î–ª—è –¥—Ä—É–≥–∏—Ö - —Ä–µ–¥–∏—Ä–µ–∫—Ç
                window.location.href = 'login.html';
                return null;
            }
        }
        
        // ========== –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–ê ==========
        function updateUserInfo(userData) {
            console.log('üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:', userData.first_name);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–º—è
            const nameElements = document.querySelectorAll('#userName, #userFullName, #creatorName');
            nameElements.forEach(el => {
                if (el && userData.first_name) {
                    el.textContent = userData.first_name;
                }
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º ID
            const idElement = document.getElementById('userId');
            if (idElement && userData.id) {
                idElement.textContent = userData.id;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º Telegram
            const tgElement = document.getElementById('userTelegram');
            if (tgElement && userData.username) {
                tgElement.textContent = '@' + userData.username;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–ª—å
            const roleElement = document.getElementById('userRole');
            if (roleElement) {
                roleElement.textContent = userData.isAdmin ? '–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä' : '–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä';
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
            const infoBlock = document.getElementById('userInfoBlock');
            if (infoBlock) {
                infoBlock.style.display = 'block';
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω–∞
            const adminPanelBtn = document.getElementById('adminPanelBtn');
            if (adminPanelBtn && userData.isAdmin) {
                adminPanelBtn.style.display = 'flex';
                adminPanelBtn.addEventListener('click', function() {
                    window.open('admin-panel.html', '_blank');
                });
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            if (userData.first_name) {
                document.title = `–ü–æ—Å—ñ–±–Ω–∏–∫ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ | ${userData.first_name}`;
            }
            
            console.log('‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±–Ω–æ–≤–ª—ë–Ω');
        }
        
        // ========== –§–£–ù–ö–¶–ò–ò –ò–ù–¢–ï–†–§–ï–ô–°–ê ==========
        window.showPage = function(pageId) {
            // –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ –≤—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç–∏ –≤–∏–±—Ä–∞–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É
            const pageToShow = document.getElementById(pageId + 'Page');
            if (pageToShow) {
                pageToShow.classList.add('active');
            }
            
            // –û–Ω–æ–≤–∏—Ç–∏ –∞–∫—Ç–∏–≤–Ω–∏–π –ø—É–Ω–∫—Ç –º–µ–Ω—é
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('onclick') === `showPage('${pageId}')`) {
                    item.classList.add('active');
                }
            });
            
            // –ó–∞–∫—Ä–∏—Ç–∏ –º–µ–Ω—é –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö
            if (window.innerWidth < 768) {
                const sidebar = document.getElementById('sidebar');
                const sidebarOverlay = document.getElementById('sidebarOverlay');
                if (sidebar && sidebarOverlay) {
                    sidebar.classList.remove('active');
                    sidebarOverlay.classList.remove('active');
                }
            }
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–∏ –≤–≥–æ—Ä—É
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            return false;
        };
        
        function initializeUI() {
            console.log('üîÑ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É...');
            
            const menuToggle = document.getElementById('menuToggle');
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            const logoutBtn = document.getElementById('logoutBtn');
            const logoutModal = document.getElementById('logoutModal');
            const confirmLogout = document.getElementById('confirmLogout');
            const cancelLogout = document.getElementById('cancelLogout');
            
            // –ú–µ–Ω—é
            if (menuToggle && sidebar && sidebarOverlay) {
                menuToggle.addEventListener('click', function() {
                    sidebar.classList.add('active');
                    sidebarOverlay.classList.add('active');
                });
                
                sidebarOverlay.addEventListener('click', function() {
                    sidebar.classList.remove('active');
                    sidebarOverlay.classList.remove('active');
                });
            }
            
            // –í—ã—Ö–æ–¥
            if (logoutBtn && logoutModal && confirmLogout && cancelLogout) {
                logoutBtn.addEventListener('click', function() {
                    logoutModal.style.display = 'flex';
                });
                
                confirmLogout.addEventListener('click', function() {
                    localStorage.clear();
                    window.location.href = 'login.html';
                });
                
                cancelLogout.addEventListener('click', function() {
                    logoutModal.style.display = 'none';
                });
            }
            
            console.log('‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
        }
        
        // ========== –ó–ê–ü–£–°–ö ==========
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üöÄ –ó–∞–ø—É—Å–∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            const userData = await checkAuth();
            
            if (!userData) {
                console.log('‚ùå –ù–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏');
                // –£–∂–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ checkAuth
                return;
            }
            
            console.log('‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω:', userData.first_name);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateUserInfo(userData);
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º UI
            initializeUI();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—É—é
            showPage('home');
            
            console.log('‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞');
        });
    </script>
</body>
</html>
