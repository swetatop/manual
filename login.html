<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Вхід | Посібник модератора</title>
    <style>
        body {
            background: #0f172a;
            color: white;
            font-family: sans-serif;
            text-align: center;
            padding: 100px 20px;
        }
        
        h1 {
            color: #60a5fa;
            margin-bottom: 20px;
        }
        
        .telegram-widget {
            margin: 40px auto;
            display: inline-block;
        }
        
        .info {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3B82F6;
            padding: 15px;
            max-width: 500px;
            margin: 40px auto;
            text-align: left;
        }
    </style>
</head>
<body>
    <h1>Ukraine GTA 5</h1>
    <p>Посібник модератора</p>
    
    <div class="telegram-widget">
        <script async src="https://telegram.org/js/telegram-widget.js?22" 
                data-telegram-login="UGgtavBot" 
                data-size="large" 
                data-auth-url="auth-success.html"
                data-request-access="write"></script>
    </div>
    
    <div class="info">
        <strong>Як працює:</strong>
        <ol style="margin-top: 10px; padding-left: 20px;">
            <li>Натисніть кнопку вище</li>
            <li>Увійдіть через свій Telegram</li>
            <li>Адміністратор підтвердить ваш доступ</li>
            <li>Готово! Можете користуватись посібником</li>
        </ol>
    </div>
    
    <script>
        // Функция, которую вызовет Telegram Widget
        function onTelegramAuth(user) {
            console.log('Користувач увійшов:', user);
            
            // Сохраняем в localStorage
            localStorage.setItem('tg_user', JSON.stringify({
                id: user.id,
                first_name: user.first_name,
                username: user.username || '',
                photo_url: user.photo_url || '',
                auth_date: user.auth_date
            }));
            
            // Переходим на обработчик
            window.location.href = 'check-access.html';
        }
        
        // Делаем функцию глобальной
        window.onTelegramAuth = onTelegramAuth;
    </script>
</body>
</html>
